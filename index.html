<!DOCTYPE html>
<html lang="en">


<head>
    <link rel="shortcut icon" type="image/png" href="img/favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <title>Homepage</title>
</head>

<body>
    <div class="homeContainer">
        <div class="tracker-page-container">
            <!-- Header -->
            <div class="header">
                <h1 class="title">Homepage</h1>
                <!-- <img src="img/settings.png" alt="Settings" class="settings-icon"> -->
            </div>

            <div class="welcome-section">
                <h2>Welcome back, <span class="name">Jessica!</span></h2>
                <p>What would you like to focus on today?</p>
            </div>

            <div class="challenges-section">
                <div class="challenges-header">
                    <h3>Challenges</h3>
                    <!-- <a href="#" class="view-all">VIEW ALL</a> -->
                </div>

                <form class="challenge-card">
                    <div class="challenge-header">
                        <span class="challenge-title">Carpool to work</span>
                        <span class="challenge-type">20 points</span>
                    </div>
                    <div class="challenge-meta">
                        <div class="participants">
                            <div class="participant-avatars">
                                <img src="img/user1.png" alt="participant">
                                <img src="img/user2.png" alt="participant">
                            </div>
                            <span class="friend-count"><span class="count">20+ friends</span> have joined</span>
                        </div>
                        <input type="checkbox" id="join1" class="join-checkbox">
                        <a href="tracker.html" class="join-button">Join</a>
                    </div>
                </form>


                <form class="challenge-card">
                    <div class="challenge-header">
                        <span class="challenge-title">No electricity at night</span>
                        <span class="challenge-type">30 points</span>
                    </div>
                    <div class="challenge-meta">
                        <div class="participants">
                            <div class="participant-avatars">
                                <img src="img/user1.png" alt="participant">
                                <img src="img/user2.png" alt="participant">
                            </div>
                            <span class="friend-count"><span class="count">20+ friends</span> have joined</span>
                        </div>
                        <input type="checkbox" id="join2" class="join-checkbox">
                        <a href="tracker.html" class="join-button">Join</a>
                    </div>
                </form>

                <form class="challenge-card3">
                    <div class="challenge-header">
                        <span class="challenge-title">Take shorter showers</span>
                        <span class="challenge-type">10 points</span>
                    </div>
                    <div class="challenge-meta">
                        <div class="participants">
                            <div class="participant-avatars">
                                <img src="img/user1.png" alt="participant">
                                <img src="img/user2.png" alt="participant">
                            </div>
                            <span class="friend-count"><span class="count">20+ friends</span> have joined</span>
                        </div>
                        <input type="checkbox" id="join3" class="join-checkbox">
                        <a href="tracker.html" class="join-button">Join</a>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <div class="tracker-bottom-nav">
        <a href="index.html" class="tracker-nav-item active">
            <img src="img/home2.svg" alt="Home" class="nav-icon" />
            Home
        </a>
        <a href="tracker.html" class="tracker-nav-item">
            <img src="img/add.svg" alt="Tracker" class="nav-icon" />
            Tracker
        </a>
        <a href="Leaderboard.html" class="tracker-nav-item">
            <img src="img/ranking.svg" alt="Ranking" class="nav-icon" />
            Ranking
        </a>
        <a href="profile.html" class="tracker-nav-item">
            <img src="img/profile.svg" alt="Profile" class="nav-icon" />
            Profile
        </a>
    </div>
    </div>

    </div>


    <script>
        // Retrieve the name from localStorage and update the greeting
        window.onload = function () {
            const name = localStorage.getItem('userName');
            if (name) {
                document.querySelector('.name').textContent = name;
            }
        }

        // Retrieve the name from localStorage and update the greeting
        window.onload = function () {
            const name = localStorage.getItem('userName');
            if (name) {
                document.querySelector('.name').textContent = name;
            }
        }

        // Add join functionality for challenges
        document.querySelectorAll('.join-button').forEach(button => {
            button.addEventListener('click', function (event) {
                event.preventDefault(); // Prevent default link behavior

                // Find the associated challenge card
                const challengeCard = this.closest('.challenge-card');
                const title = challengeCard.querySelector('.challenge-title').textContent.trim();
                const points = parseInt(challengeCard.querySelector('.challenge-type').textContent.trim());

                // Create a new habit object
                const newHabit = {
                    id: Date.now().toString(), // Unique ID based on the current timestamp
                    name: title,
                    goal: 1, // Default goal for joined challenges
                    emoji: "ðŸ•’",
                    reminderTime: "06:00", // Default reminder time
                    reminderFrequency: "daily", // Default reminder frequency
                    completed: 0, // Default completion
                    points: points // Points for the challenge
                };

                // Get existing habits from localStorage
                const allHabits = JSON.parse(localStorage.getItem("allHabits")) || [];

                // Add the new habit to the habits array
                allHabits.push(newHabit);

                // Save updated habits array to localStorage
                localStorage.setItem("allHabits", JSON.stringify(allHabits));

                // Redirect to the tracker page
                window.location.href = "tracker.html";
            });
        });
    </script>

</body>

</html>